# Payment 支付流程 — CPO 评审清单

> 类型: payment
> 适用: 产品中涉及付费环节的支付流程设计，包括 SaaS 订阅、一次性购买、电商结账等场景。本清单聚焦"定价页 → 支付完成"这段关键路径。
> 版本: v1.0

---

## 核心考量维度

### 用户路径

支付流程是用户决策链的最后一段，也是放弃率最高的环节：

```
Pricing Page（定价页）→ Plan Selection（选择套餐）→ Checkout（结账）→ Payment Confirmation（支付确认）→ Receipt（收据/发票）
```

**关键路径说明：**

| 触点 | 用户行为 | 用户心理 | 设计要点 |
|------|---------|---------|---------|
| **定价页** | 比较不同套餐 | "哪个适合我？值不值？" | 套餐差异一目了然，推荐最适合的套餐（highlight） |
| **套餐选择** | 确认选择，点击购买 | "我确认要这个吗？不会选错吧？" | 允许返回修改，显示选中套餐摘要 |
| **Checkout** | 填写支付信息 | "安全吗？会不会多扣钱？" | 安全标识（SSL 锁、支付品牌 Logo）、费用明细透明 |
| **支付确认** | 输入密码/验证码完成支付 | "支付成功了吗？" | 即时反馈 + 加载状态，不要让用户猜测 |
| **收据** | 查看支付凭证 | "我需要这个报销/存档" | 自动发送邮件收据，支持下载 PDF 发票 |

**分支路径：**
- **试用转付费**：Trial 到期 → 提醒邮件 → 定价页 → 支付（关键是 trial 期间已产生数据和习惯）
- **升级路径**：当前套餐 → 触发升级（达到限额/需要新功能）→ 差价结算 → 确认
- **续费路径**：自动续费提醒 → 确认/取消/变更套餐

---

### 关键转化节点

| 转化节点 | 目标行为 | 行业基准 CVR | 关键影响因素 |
|---------|---------|-------------|-------------|
| **定价页 → 选择套餐** | 选择一个套餐点击"购买" | 15-30% | 套餐对比清晰度、价格锚定、推荐标识 |
| **套餐选择 → 进入 Checkout** | 进入支付页面 | 60-80% | 是否需要先注册、摩擦是否太多 |
| **Checkout → 支付成功** | 完成支付 | 50-70% | 支付方式、安全感、隐藏费用、流程步骤 |
| **试用 → 付费** | Trial 用户转为付费 | 15-25% (SaaS) | 试用期内的激活度、到期提醒策略、价值感知 |

**转化漏斗优化优先级：**
1. **Checkout → 支付成功** — Checkout 放弃是直接的收入损失
2. **定价页 → 选择套餐** — 定价策略和呈现方式对转化影响最大
3. **试用 → 付费** — SaaS 产品最关键的商业指标

---

### 必备功能清单

#### P0 — 没有不行

| # | 功能 | 解决什么问题 | 验收标准 |
|---|------|------------|---------|
| 1 | **清晰的定价层级** | 用户需要快速理解不同套餐的差异和价值 | 2-4 个套餐，差异点用对比表格展示，推荐套餐有明显标识 |
| 2 | **安全的 Checkout 流程** | 用户对支付安全极度敏感 | HTTPS + SSL 标识可见、支付品牌 Logo 展示（Visa/Mastercard 等）、不存储完整卡号 |
| 3 | **多种支付方式** | 不同用户习惯不同支付方式 | 至少支持信用卡/借记卡 + 1 种替代支付（PayPal/Apple Pay/支付宝，取决于市场） |
| 4 | **收据/发票** | 用户需要支付凭证 | 支付成功后自动发送邮件收据；支持查看历史账单；B2B 场景支持发票 |
| 5 | **支付状态反馈** | 用户需要知道支付是否成功 | 支付处理中有明确的 loading 状态；成功/失败有明确提示；失败提供重试和替代方案 |

#### P1 — 强烈建议

| # | 功能 | 价值说明 | 建议加入版本 |
|---|------|---------|-------------|
| 1 | **免费试用入口** | 降低付费决策门槛 | V1.0 |
| 2 | **套餐变更（升级/降级）** | 用户需求会变化 | V1.1 |
| 3 | **优惠码/促销** | 营销和增长的重要工具 | V1.1 |
| 4 | **年付折扣** | 提升 LTV、降低 churn | V1.0（定价页展示） |
| 5 | **退款流程** | 降低用户付费心理门槛 | V1.1 |
| 6 | **支付失败自动重试** | 减少因卡片临时问题导致的 involuntary churn | V1.2 |
| 7 | **用量计费仪表盘** | 如果有用量相关的定价 | V1.1 |

---

### 常见陷阱

| # | 陷阱 | 典型表现 | 后果 | 预防措施 |
|---|------|---------|------|---------|
| 1 | **隐藏费用** | 结账时才显示税费、服务费 | 用户感觉被欺骗，直接放弃 + 负面口碑 | 定价页就明确"含税价"或"税费另计"，Checkout 页第一步显示完整费用明细 |
| 2 | **Checkout 流程复杂** | 结账要 5 个步骤、3 个页面跳转 | 每多一步流失 10-20% 用户 | 单页 Checkout，必填字段控制在 5 个以内 |
| 3 | **无试用选项** | 上来就要付费，没有体验机会 | 高价值用户因无法试用而流失 | 至少提供 7-14 天免费试用或 freemium 版本 |
| 4 | **先注册再看价格** | 用户必须注册才能看到定价页 | 大量潜在用户在注册墙前离开 | 定价公开透明，注册在付费时再要求 |
| 5 | **套餐太多** | 5 个以上套餐，差异不明 | 选择瘫痪，用户无法决策 | 最多 3-4 个套餐，推荐一个"最佳选择" |
| 6 | **缺少安全标识** | Checkout 页没有 SSL 锁、没有支付品牌 Logo | 用户不信任，不敢输入卡号 | SSL 证书 + 安全标识 + 知名支付品牌 Logo + 隐私声明链接 |
| 7 | **支付失败无引导** | 支付失败只显示"支付失败"，没有下一步 | 用户不知道为什么失败、该怎么办 | 提供具体失败原因 + 重试按钮 + 替代支付方式建议 + 客服联系方式 |

---

### 技术考量

#### 架构选型

| 决策点 | 选项 A | 选项 B | 推荐 | 考量因素 |
|--------|--------|--------|------|---------|
| **支付网关** | Stripe | PayPal / Braintree | Stripe (全球) | API 设计优秀、文档完善、覆盖最多支付方式；中国市场用支付宝/微信支付 |
| **订阅管理** | Stripe Billing | 自建订阅系统 | Stripe Billing → MVP | 自建成本高，Stripe Billing 覆盖 80% 订阅场景 |
| **定价模型** | 固定层级定价 | 用量计费 | 固定层级 → MVP | 用量计费的计量和结算复杂度高，MVP 不建议 |
| **发票系统** | 第三方（Stripe Invoice） | 自建 | 第三方 → MVP | 发票格式、税务逻辑复杂，用第三方快速启动 |

#### PCI 合规

| 要求 | 说明 | 实现方式 |
|------|------|---------|
| **不存储卡号** | 永远不在自己的服务器上存储完整卡号 | 使用 Stripe Elements / PayPal Hosted Fields，卡号直接进入支付网关 |
| **HTTPS** | 所有支付相关页面必须 HTTPS | 全站 HTTPS（现代 CDN 免费提供） |
| **令牌化** | 用 token 代替真实卡号 | Stripe 自动处理，只需保存 Customer ID 和 Subscription ID |
| **安全审计日志** | 支付相关操作需要审计追踪 | 记录支付事件日志（金额、时间、结果、IP） |

#### Webhook 处理

| 事件 | 处理逻辑 | 重要性 |
|------|---------|--------|
| `payment_intent.succeeded` | 开通权限、发送收据 | 必须 |
| `payment_intent.payment_failed` | 通知用户、记录失败原因 | 必须 |
| `customer.subscription.updated` | 更新用户套餐状态 | 必须 |
| `customer.subscription.deleted` | 降级/关闭权限 | 必须 |
| `invoice.payment_failed` | 续费失败处理（Dunning） | V1.1 |
| `charge.dispute.created` | 争议/退款处理 | V1.1 |

**Webhook 最佳实践：**
- 实现幂等处理（同一事件可能重复投递）
- Webhook 接收后先返回 200，异步处理业务逻辑
- 对关键事件实现重试和告警机制

#### 性能要求

| 指标 | 目标值 | 测量方式 |
|------|--------|---------|
| Checkout 页加载时间 | < 2s | Lighthouse |
| 支付处理响应时间 | < 5s（含 3D Secure） | 后端日志 |
| Webhook 处理延迟 | < 30s | 监控系统 |
| 支付成功率 | > 95% | 支付网关 Dashboard |

#### 技术风险

| 风险 | 概率 | 影响 | 缓解方案 |
|------|------|------|---------|
| 支付网关宕机 | 低 | 极高 | 准备备用支付网关（如 Stripe 主 + PayPal 备） |
| 3D Secure 验证失败率高 | 中 | 高 | 使用 Stripe 的智能 3D Secure（只在需要时触发） |
| 货币转换/汇率问题 | 中（多币种） | 中 | 明确定价币种，使用支付网关的多币种支持 |
| Webhook 丢失导致状态不一致 | 中 | 高 | 实现定时对账脚本 + Webhook 重试机制 |

---

### 行业基准

| KPI | 行业基准 | 优秀水平 | 合格水平 | 数据来源 |
|-----|---------|---------|---------|---------|
| **Checkout 放弃率** | 60-80% | < 50% | < 70% | Baymard Institute |
| **支付成功率** | 90-95% | > 97% | > 93% | Stripe 行业数据 |
| **试用→付费转化率** | 15-25% (SaaS) | > 30% | > 15% | OpenView SaaS Benchmarks |
| **月流失率（Churn）** | 3-7% (B2B SaaS) | < 2% | < 5% | SaaS Capital |
| **ARPU** | 因行业而异 | — | — | 需要基于竞品定义 |
| **LTV/CAC** | > 3:1 | > 5:1 | > 3:1 | 通用 SaaS 标准 |
| **年付占比** | 20-40% | > 50% | > 25% | ProfitWell |

**基准使用注意：**
- Checkout 放弃率包含"只是看看价格"的用户，实际"有意向但放弃"的比例低于总放弃率
- 试用转化率与试用期长度、信用卡要求、产品激活度高度相关
- B2C 的 Churn 通常高于 B2B，不同价格区间的 Churn 差异很大
- 中国市场的支付习惯（支付宝/微信支付为主）和欧美市场（信用卡为主）差异极大

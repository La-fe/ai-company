# 竞品提取方法参考手册

> 本文档在 Phase 1-3（逐竞品分析）时加载。
> 来源: DDD (Eric Evans), Competitive Intelligence, Product Teardown

---

## 数据模型提取方法

### 为什么要提取数据模型？

竞品的功能列表容易抄，但数据模型反映**业务本质**。通过提取竞品的实体关系模型，可以发现：

- **行业共识**: 所有竞品都有的实体 = 核心业务概念
- **设计选择**: 实体间的关系反映了架构决策
- **复杂度信号**: 实体数量和层级直接反映产品复杂度

### 方法 1: 从 API 文档提取（最准确）

适用于有公开 API 的竞品。

```
操作:
1. WebSearch "{竞品名} API documentation" / "{竞品名} developer docs"
2. WebFetch API 参考页面
3. 如有 OpenAPI/Swagger 文档，优先读取

提取:
- API 端点 → 实体名称（/users, /products, /orders → User, Product, Order）
- 请求/响应字段 → 实体属性（name, price, status...）
- 关联 ID 字段 → 实体关系（order.product_id → Order 属于 Product）
- CRUD 端点齐全度 → 实体重要性（全 CRUD = 核心实体，只有 Read = 辅助实体）
- 嵌套资源 → 层级关系（/products/{id}/variants → Variant 属于 Product）
```

### 方法 2: 从 UI 界面反推

适用于没有公开 API 的竞品。

```
操作:
1. WebFetch 竞品主要页面（官网、产品页、定价页）
2. 如有截图（--materials），Read 图片分析 UI 结构

提取:
- 导航菜单项 → 一级实体
- 页面中的表格/列表 → 实体属性
- 详情页中的关联链接 → 实体关系
- 表单字段 → 实体的可编辑属性
- 筛选条件 → 实体的索引属性
- 操作按钮 → 实体的状态转换
```

### 方法 3: 从定价页推断

核心洞察：**收费的东西 = 核心实体**。

```
操作: WebFetch 竞品定价页

提取:
- 套餐限额项 → 核心实体（"最多 10 个项目" → Project 是核心实体）
- 按量计费项 → 高频事务实体（"$0.01/次调用" → APICall 是事务实体）
- 功能差异项 → 增值实体（"高级分析" → Analytics 是增值实体）
- 免费层包含什么 → 最小可用实体集
- 付费层新增什么 → 增值实体
```

### 实体分类方法

提取实体后进行四类分类：

| 类型 | 定义 | 判断标准 | 举例 |
|------|------|---------|------|
| **核心实体** | 产品不能没有的 | 去掉它产品就无法运作 | User, Product, Store |
| **辅助实体** | 支撑性基础设施 | 提供管理/配置/权限能力 | Role, Permission, Setting |
| **价值实体** | 用户为之付费的 | 出现在定价页限额或功能列表中 | Plan, Subscription, Credit |
| **事务实体** | 一次性事件记录 | 订单、支付、日志等 | Order, Payment, Event |

分类策略：
1. API 文档有完整 CRUD → 核心或价值实体
2. 只有 Read 端点 → 辅助实体
3. 定价页限额项 → 价值实体
4. Webhook 事件 → 事务实体

---

### 实体关系图绘制规范

使用标准化关系符号（而非简单树形图）：

```
User -1:N-> Store -1:N-> Product
                         ├─1:N-> Variant
                         └─1:N-> Media
Product -1:N-> Order -1:1-> Payment
Store ----> Theme（包含/强拥有）
User -N:N-> Role（多对多）
Order ....> Coupon（依赖/弱引用）

支付: {支付方式和集成}
特色: {1-2 个核心差异化实体/功能}
缺失: {明显没有的功能/实体}
```

关系符号标准：

| 符号 | 含义 | 使用场景 |
|------|------|---------|
| `-1:N->` | 一对多 | 父子关系：User → Orders |
| `-N:N->` | 多对多 | 关联关系：Product ↔ Category |
| `-1:1->` | 一对一 | 扩展关系：User → Profile |
| `---->` | 包含（强拥有） | 生命周期绑定：Store 包含 Theme |
| `....>` | 依赖（弱引用） | 可选关联：Order 引用 Coupon |

绘制原则：
- 主线从左到右（核心业务流）
- 分支用 `├─` `└─` 向下展开
- 每条关系线标注关系类型
- 关键外键字段用 `FK ->` 标注

---

### 核心实体字段定义提取

对 3-5 个最重要的核心实体，提取字段级别定义。

**提取来源优先级：**

| 来源 | 可获取字段 | 可靠度 |
|------|-----------|--------|
| API 请求/响应 schema | 完整字段 + 类型 | 最高 |
| API 文档字段说明 | 字段名 + 描述 | 高 |
| UI 表单 | 可编辑字段 | 中 |
| UI 列表/表格 | 可见字段 | 中 |
| 推测（从功能需要反推） | 推断字段 | 低 |

**字段定义模板：**

```
Entity: {实体名} [{类型: 核心/辅助/价值/事务}]
├── id: string (唯一标识)
├── name: string (名称)
├── type: enum [{可能的类型值}]
├── status: enum [{可能的状态值}]
├── {field}: {type} ({说明})
├── {relation}_id: FK -> {关联实体}
├── created_at: datetime
└── metadata: object (扩展字段)

来源: [API / UI / 推测]
```

**注意事项：**
- "推测"标注的字段不超过总字段的 30%
- 优先提取影响业务逻辑的字段（status, type, price），而非展示类字段
- 外键字段（`*_id`）反映实体关系，必须提取

---

## 定价模型提取

### 定价模式分类

| 模式 | 特征 | 典型例子 |
|------|------|---------|
| **纯订阅** | 月/年固定费用，按功能/用量分层 | Shopify, Stan Store |
| **交易抽成** | 按交易额收取百分比 | Whop, Gumroad |
| **信用点** | 预购点数，按操作消耗 | Lovable, AI 工具类 |
| **免费增值** | 核心免费，高级功能收费 | Linktree, Beacons |
| **混合** | 订阅 + 抽成 | Shopify（月费 + 支付手续费） |

### 定价 → 实体映射

提取时关注：

- 哪些实体数量受限 → 核心实体
- 哪些功能付费解锁 → 增值实体
- 免费 → 付费的边界在哪个实体 → 付费墙实体

---

## 用户旅程还原方法

### 信息来源

| 来源 | 可靠度 | 获取方式 |
|------|--------|---------|
| 亲自注册试用 | 最高 | 如可免费试用，亲自走一遍 |
| 用户截图/素材 | 高 | `--materials` 提供的截图 |
| 产品演示视频 | 高 | WebSearch "{竞品} demo / walkthrough / tutorial" |
| 官网产品页截图 | 中 | WebFetch 产品页 |
| 用户评价描述 | 低 | WebSearch "{竞品} review / 使用体验" |

### 旅程表模板

| 步骤 | 页面 / 动作 | 涉及实体 | 操作(CRUD) | 备注 |
|------|------------|---------|-----------|------|
| 1 | 注册 | User | Create | 邮箱/OAuth |
| 2 | 选择套餐 | Plan | Read | 免费可跳过？ |
| 3 | 创建第一个... | {核心实体} | Create | TTFV 关键步骤 |
| ... | ... | ... | ... | ... |

### 流程图辅助说明（通用工具）

> 流程图不仅用于用户旅程——凡涉及**流程、路径、循环**的分析都应考虑用流程图辅助说明，比纯文字/表格更直观。

**流程图符号规范：**

| 符号 | 含义 | 示例 |
|------|------|------|
| `[动作]` | 页面、操作步骤或状态 | `[注册]`, `[AI 生成]`, `[免费用户]` |
| `→` | 顺序流转 | `[注册] → [仪表盘]` |
| `→┬→` / `├→` / `└→` | 分叉路径 | 多条件分支 |
| `↓` `↑` | 垂直流转 | 上下层级连接 |
| `"条件"` | 分叉判断条件 | `"建网站"`, `"产品数满"` |
| `← [循环]` | 回退/迭代循环 | `[编辑] ← [预览]` |

**适用场景 + 示例：**

**1. 用户旅程 — Onboarding 分叉（Layer 3）**

```
[注册] → [选择意图] →┬→ "建网站" → [AI 问答] → [AI 生成] → [编辑器]
                     ├→ "开网店" → [模板选择] → [商品配置] → [支付设置]
                     └→ "写博客" → [主题选择] → [内容编辑]
                                                    ↓
                                          [预览] → [发布] → [仪表盘]
                                            ↑                  ↓
                                          [编辑] ←──── [数据分析]
```

**2. 定价升级路径（Layer 4）**

```
[免费用户] → [使用核心功能] → [触达限额] →┬→ "产品数满" → [升级提示] → [基础版]
                                          ├→ "存储满"   → [升级提示] → [专业版]
                                          └→ "需要XX功能" → [功能门槛] → [对应层级]
```

**3. 留存循环（Layer 5）**

```
[用户创建内容] → [内容积累] → [获得流量/收入]
       ↑                           ↓
  [继续投入] ← [沉没成本增加] ← [迁移成本升高]
```

**4. AI 交互流程（Layer 6）**

```
[用户输入需求] → [AI 生成方案] →┬→ "满意" → [确认使用]
                               ├→ "部分满意" → [用户编辑] → [保存]
                               └→ "不满意" → [重新生成] ──→ [AI 生成方案]
```

**何时需要流程图：**
- 有**分叉**：多条件分支（意图、角色、套餐类型）
- 有**循环**：迭代操作（创建→预览→修改→预览）
- 有**升级/降级路径**：状态转换（免费→付费、草稿→发布）
- 有**AI 交互**：多轮确认（生成→选择→调整→确认）
- 有**留存闭环**：用户行为循环（使用→积累→锁定→继续使用）

---

### TTFV (Time to First Value) 分析

评估维度：

- **步骤数**: 从注册到第一次感受到价值的步骤数
- **预估时间**: 每步耗时 × 步骤数
- **付费门槛**: 是否需要付费才能感受到价值
- **信息门槛**: 需要用户提供多少信息
- **关键摩擦**: 需要等待审核？需要技术知识？需要上传内容？

### 留存机制识别

| 留存策略 | 表现形式 | 涉及实体 |
|---------|---------|---------|
| **数据锁定** | 用户数据越多越难迁移 | 历史记录、客户数据 |
| **社交绑定** | 社区/粉丝关系绑定 | Community, Follower |
| **习惯养成** | 定期使用触发 | 通知、报告、邮件 |
| **切换成本** | 重新设置代价 | 配置、模板、自定义 |
| **网络效应** | 用户越多越有价值 | 市场、社区、评价 |

---

## 质量标准

### 每竞品分析最低要求

| 维度 | 最低标准 |
|------|---------|
| 实体数量 | ≥ 5 个核心实体 |
| 实体分类 | 每个实体标注类型（核心/辅助/价值/事务） |
| 关系标注 | 每个实体至少 1 个标准化关系（使用 `-1:N->` 等符号） |
| 字段定义 | 3-5 个核心实体有字段级别定义 |
| 数据来源 | 每个结论标注来源（API / UI / 定价页 / 推测） |
| 旅程步骤 | ≥ 5 步（从注册到核心价值） |
| 流程图 | ≥ 1 个关键流程的 ASCII 流程图 |
| 定价信息 | 至少覆盖免费层和最低付费层 + 实体边界映射 |
| 留存机制 | 至少识别 3 种留存策略 + 涉及实体 |
| Feature 目录 | 按类别列出完整功能清单 |

### 红线

- 不允许没有来源标注的实体关系声明
- 不允许仅从单一来源（官网文案）得出数据模型结论
- "推测"标注的内容不超过总结论的 30%
